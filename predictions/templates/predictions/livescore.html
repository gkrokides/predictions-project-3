{% extends 'predictions/base.html' %}
{% block head %}

<script type="text/javascript" src="https://cdn.datatables.net/v/dt/jqc-1.12.3/pdfmake-0.1.18/dt-1.10.12/b-1.2.2/b-flash-1.2.2/b-html5-1.2.2/b-print-1.2.2/r-2.1.0/datatables.min.js"></script>

<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jqc-1.12.3/pdfmake-0.1.18/dt-1.10.12/b-1.2.2/b-flash-1.2.2/b-html5-1.2.2/b-print-1.2.2/r-2.1.0/datatables.min.css"/>



<script>
    $(document).ready(function() {
    $('#livetable').DataTable( {
        "scrollY": "600px",
        "paging": false,
        "scrollCollapse": true,
        dom: 'Bfrtip',
        buttons: [
            'copy', 'csv', 'excel', 'pdf', 'print'
        ]
    } );
} );
</script>



{% endblock %}
{% block header %}{% endblock %}

{% block content30 %}

    <h1>Example text to make sure not the whole page is refreshing.</h1>

    <div id="list">
    </div>

    <table id="livetable" class="display compact" cellspacing="0" width="100%">
        <thead>
            <tr style="font-size:80%;">
                <th>Game_ID</th>
                <th>Match Time</th>
                <th>Home Team</th>
                <th>Score</th>
                <th>Away Team</th>
                <th>Minute</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>


        </tbody>
    </table>



<script>
$(document).ready(function(){
    $.ajax({
    url: '/smlivescorerawview',
    type: 'get', // This is the default though, you don't actually need to always mention it
    success: function(data) {
        $("#livetable tbody").empty();
        $.each(data, function (index,data) {
            var score = ''
            var minute = ''
            var pk = data['pk']
            var h2h = "<a href="
            
            if (data['minute'] != null || data['minute'] != ""){
                minute = data['minute'] + "'";
                score = data['score'];
            }
            $("tbody").append(
               "<tr>" +
               "<td>" + data['cntr'] + "</td>" +
               "<td>" + data['lg'][+ "</td>" +
               "<td>" + data['gmwk'] + "</td>" +
               "<td>" + data['home'] + "</td>" +
               "<td>" + data['vs'] + "</td>" +
               "<td>" + data['away'] + "</td>" +
               "<td>" + data['date'] + "</td>" +
               "<td>" + data['time'] + "</td>" +
               "<td>" + data['bp'] + "</td>" +
               "<td>" + data['mp'] + "</td>" +
               "<td>" + data['yp'] + "</td>" +
               "<td><a href=" + "'{% url 'h2h' data['pk'] %}'" + ">H2H</a>" + "</td>" +
               "<td><a href=" + "'{% url 'add_tip_from_pk' data['pk'] %}'" + ">+Tip</a>" + "</td>" +
               "<td>" + score + "</td>" +
               "<td>" + minute + "</td>" +
               "<td>" + data['status'] + "</td>" +
               "</tr>"
            )
        })

        //  $('#livetable tbody').html("");
        // $.each(smdata, function(index,smdata) {        
        //     tr = $('<tr>');
        //     tr.append("<td>" + smdata['id'] + "</td>");
        //      $('#myTable tbody').append(tr);
        //     console.log(tr);
        // });

    },
    failure: function(data) { 
        alert('Something went wrong');
    }
}); 
});   
</script>
{% endblock %}